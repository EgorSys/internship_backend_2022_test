# Инструкция по использованию
## База данных
Предполагается, что сервис подключается к базе данных PostgreSQL, которая имеет:
- Две таблицы: users и reserves. Для хранения актуальных балансов пользователей и зарезервированных транзауций соответственно
- Таблица users имеет поля id (varchar) и balance (int). Для хранения идентификатора и баланса пользователя соответственно. Предполагается, что id заранее известен тому, кто подаёт запрос. Будем считать, что баланс в неких виртуальных единицах, поэтому имеет целочисленное значение.
- Таблица reserves имеет поля id (varchar), service_id (varchar), order_id (varchar), balance (int).
## Запросы
Запросы можно разделить на 2 типа:
- Которые обращаются к таблице users. Они отправляют json соответствующий формату таблицы.
```
{
  id: "...",
  balance: ...
}
```
- Которые обращаются к таблице users. Они тоже отправляют json соответствующий формату таблицы.
```
{
  id: "...",
  service_id: "...",
  order_id: "...",
  balance: ...
}
```
Важно: balance в данном случае довольно противоречивое название, потому что в это поле также может записываться сумма пополнения (а не сам баланс)

Программа может принимать следующие запросы:
- Получение баланса пользователя по id. Возвращает json c id и балансом. Формат запроса:
```
curl host:port/balances/id
```
- Пополнение баланса пользователя. Формат запроса:
```
curl host:port/transfer --include --header "Content-Type: application/json" -d @file.json --request "POST"
```
- Создание нового пользователя с балансом. Формат запроса:
```
curl host:port/create_balance --include --header "Content-Type: application/json" -d @file.json --request "POST"
```
- Создание резерва баланса пользователя. Формат запроса:
```
curl host:port/create_reserve --include --header "Content-Type: application/json" -d @file.json --request "POST"
```
- Пополнение резерва баланса пользователя. Формат запроса:
```
curl host:port/reserve --include --header "Content-Type: application/json" -d @file.json --request "POST"
```
- Признание резерва. Формат запроса:
```
curl host:port/admit --include --header "Content-Type: application/json" -d @file.json --request "POST"
```

Принимаемые данные для запросов как указано в задании.
## Как запустить
В идеале нужно заускать команду
```
docker-compose up
```
Однако что-то пошло не так, и оно не работает.
<br>
С docker работает только запуск сервиса без базы данных. Хотя сам по себе такой контейнер бесполезен, при желании можно вручную подключить его к локальной базе данных. Для запуска нужно исполнить команды (для сборки и запуска приложения):
```
docker build -t go-app .
docekr run --name=go-web-app -p 8080:8080 go-app
```
<br>
Иначе (без docker) нужно создать базу данных postgres, указать в main.go параметры подключения, и запустить файл с помощью.
"go run main.go". После Этого приложением можно пользоваться
